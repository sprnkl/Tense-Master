<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Tenses Master</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        primary: '#2563eb', // Royal Blue
                        secondary: '#475569', // Slate
                    }
                }
            }
        }
    </script>

    <style>
        /* Hide scrollbar for Chrome, Safari and Opera */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        /* Hide scrollbar for IE, Edge and Firefox */
        .no-scrollbar {
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Material Icon Alignment */
        .material-symbols-outlined {
            vertical-align: bottom;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 h-screen flex flex-col overflow-hidden">

    <header class="bg-white shadow-sm z-10 flex-none">
        <div class="max-w-4xl mx-auto px-4 py-3 flex justify-between items-center">
            <h1 class="text-xl font-bold text-primary tracking-tight">TenseMaster</h1>
            <button onclick="alert('Version 1.0 - Created by Andreas')" class="text-slate-400 hover:text-primary transition">
                <span class="material-symbols-outlined">info</span>
            </button>
        </div>
        
        <nav class="border-b border-slate-200">
            <div class="max-w-4xl mx-auto flex overflow-x-auto no-scrollbar py-2 px-2 gap-2" id="nav-container">
                </div>
        </nav>
    </header>

    <main class="flex-grow overflow-y-auto p-4" id="main-content">
        </main>

    <div id="table-modal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden">
            <div class="p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50">
                <h3 class="font-bold text-lg" id="modal-title">Cheat Sheet</h3>
                <button onclick="closeModal()" class="text-slate-500 hover:text-red-500 transition">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="p-0 overflow-auto" id="modal-body">
                </div>
        </div>
    </div>

    <script>
        // --- 1. DATA STRUCTURE (The "Brain") ---
        const appData = [
            {
                id: 'simple-present',
                name: 'Simple Present',
                category: 'Basic',
                learn: {
                    intro: "Das Simple Present beschreibt Handlungen, die regelm√§√üig stattfinden, Fakten oder allgemeing√ºltige Aussagen.",
                    signalWords: ["always", "often", "usually", "sometimes", "never", "every day"],
                    formation: "Subjekt + Verb (bei 'he/she/it' das 's' muss mit!)",
                    exampleImage: "https://placehold.co/600x300/e2e8f0/1e293b?text=He+plays+football", // Fallback placeholder
                    examples: [
                        { en: "I walk to school.", de: "Ich laufe zur Schule." },
                        { en: "She reads a book.", de: "Sie liest ein Buch." }
                    ]
                },
                practice: [
                    { q: "She _____ (to play) tennis every Sunday.", a: "plays", hint: "Denk an das 's' bei he/she/it!" },
                    { q: "We _____ (to go) to the cinema.", a: "go", hint: "Kein 's' bei 'we'." },
                    { q: "Tom _____ (to like) pizza.", a: "likes", hint: "" }
                ],
                table: {
                    positive: "I play / He plays",
                    negative: "I do not play / He does not play",
                    question: "Do I play? / Does he play?"
                }
            },
            {
                id: 'present-progressive',
                name: 'Present Progressive',
                category: 'Basic',
                learn: {
                    intro: "Verwende das Present Progressive f√ºr Handlungen, die JETZT gerade passieren.",
                    signalWords: ["now", "at the moment", "look!", "listen!"],
                    formation: "Subjekt + form of 'to be' (am/is/are) + Verb + ing",
                    exampleImage: "https://placehold.co/600x300/e2e8f0/1e293b?text=They+are+running",
                    examples: [
                        { en: "I am writing a text.", de: "Ich schreibe gerade einen Text." },
                        { en: "Look! He is running.", de: "Schau! Er rennt." }
                    ]
                },
                practice: [
                    { q: "Listen! She _____ (to sing).", a: "is singing", hint: "am / is / are + ing" },
                    { q: "They _____ (to play) football right now.", a: "are playing", hint: "" }
                ],
                table: {
                    positive: "I am playing / He is playing",
                    negative: "I am not playing / He is not playing",
                    question: "Am I playing? / Is he playing?"
                }
            },
            {
                id: 'simple-past',
                name: 'Simple Past',
                category: 'Advanced', // Just for demo grouping
                learn: {
                    intro: "Abgeschlossene Handlungen in der Vergangenheit.",
                    signalWords: ["yesterday", "last week", "in 2010", "ago"],
                    formation: "Regelm√§√üig: Verb + ed. Unregelm√§√üig: 2. Spalte!",
                    exampleImage: "https://placehold.co/600x300/e2e8f0/1e293b?text=I+visited+Paris",
                    examples: [
                        { en: "I visited my grandma.", de: "Ich besuchte meine Oma." },
                        { en: "He went to school.", de: "Er ging zur Schule." }
                    ]
                },
                practice: [
                    { q: "I _____ (to watch) TV yesterday.", a: "watched", hint: "Regelm√§√üiges Verb (+ed)" },
                    { q: "We _____ (to buy) a new car.", a: "bought", hint: "Unregelm√§√üig!" }
                ],
                table: {
                    positive: "I played / I went",
                    negative: "I did not play / I did not go",
                    question: "Did I play? / Did I go?"
                }
            }
        ];

        // --- 2. STATE MANAGEMENT ---
        let currentTenseIndex = 0;
        let currentMode = 'learn'; // 'learn' or 'practice'

        // --- 3. DOM ELEMENTS ---
        const navContainer = document.getElementById('nav-container');
        const mainContent = document.getElementById('main-content');
        const modal = document.getElementById('table-modal');
        const modalBody = document.getElementById('modal-body');
        const modalTitle = document.getElementById('modal-title');

        // --- 4. INITIALIZATION ---
        function init() {
            renderNav();
            renderContent();
        }

        // --- 5. RENDER FUNCTIONS ---
        
        // Render Navigation (Horizontal Scroll)
        function renderNav() {
            navContainer.innerHTML = '';
            appData.forEach((tense, index) => {
                const btn = document.createElement('button');
                const isActive = index === currentTenseIndex;
                
                // Style logic for active/inactive tabs
                let classes = "px-4 py-2 rounded-full text-sm font-medium transition-all whitespace-nowrap flex-shrink-0 border ";
                classes += isActive 
                    ? "bg-primary text-white border-primary shadow-md" 
                    : "bg-white text-slate-600 border-slate-200 hover:bg-slate-50";

                btn.className = classes;
                btn.textContent = tense.name;
                btn.onclick = () => {
                    currentTenseIndex = index;
                    currentMode = 'learn'; // Reset to learn mode on switch
                    renderNav();
                    renderContent();
                };
                navContainer.appendChild(btn);
            });
        }

        // Main Content Router
        function renderContent() {
            const data = appData[currentTenseIndex];
            mainContent.innerHTML = ''; // Clear current

            const container = document.createElement('div');
            container.className = "max-w-2xl mx-auto fade-in pb-20"; // pb-20 for scrolling space

            // Mode Switcher (Learn / Practice)
            const modeSwitcher = `
                <div class="flex bg-slate-200 p-1 rounded-lg mb-6">
                    <button onclick="switchMode('learn')" class="flex-1 py-2 rounded-md text-sm font-semibold transition ${currentMode === 'learn' ? 'bg-white text-primary shadow-sm' : 'text-slate-500'}">
                        <span class="material-symbols-outlined text-lg mr-1">school</span> Lernen
                    </button>
                    <button onclick="switchMode('practice')" class="flex-1 py-2 rounded-md text-sm font-semibold transition ${currentMode === 'practice' ? 'bg-white text-primary shadow-sm' : 'text-slate-500'}">
                        <span class="material-symbols-outlined text-lg mr-1">edit_note</span> √úben
                    </button>
                </div>
            `;
            
            // Cheat Sheet Button
            const cheatSheetBtn = `
                <button onclick="openTable()" class="w-full mb-6 bg-slate-800 text-white py-3 rounded-xl font-medium flex items-center justify-center gap-2 shadow-lg active:scale-95 transition">
                    <span class="material-symbols-outlined text-yellow-400">table_view</span>
                    Zeige Cheat Sheet (${data.name})
                </button>
            `;

            let contentHTML = "";

            if (currentMode === 'learn') {
                // LEARN MODULE
                contentHTML = `
                    <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
                        <div class="h-48 bg-slate-200 w-full relative group">
                            <img src="${data.learn.exampleImage}" class="w-full h-full object-cover" alt="Example" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                            <div class="hidden w-full h-full absolute top-0 left-0 flex items-center justify-center text-slate-400 bg-slate-100">
                                <span class="material-symbols-outlined text-4xl">image_not_supported</span>
                            </div>
                        </div>
                        
                        <div class="p-6">
                            <h2 class="text-2xl font-bold text-slate-800 mb-2">${data.name}</h2>
                            <p class="text-slate-600 mb-6 leading-relaxed">${data.learn.intro}</p>
                            
                            <div class="mb-6">
                                <h3 class="text-sm uppercase tracking-wide text-slate-400 font-bold mb-2">Signalw√∂rter</h3>
                                <div class="flex flex-wrap gap-2">
                                    ${data.learn.signalWords.map(w => `<span class="bg-blue-50 text-blue-700 px-3 py-1 rounded-lg text-sm font-medium">${w}</span>`).join('')}
                                </div>
                            </div>

                            <div class="bg-slate-50 p-4 rounded-xl border border-slate-200">
                                <h3 class="text-sm uppercase tracking-wide text-slate-400 font-bold mb-2">Bildung</h3>
                                <p class="font-mono text-primary font-medium">${data.learn.formation}</p>
                            </div>

                            <div class="mt-6">
                                <h3 class="text-sm uppercase tracking-wide text-slate-400 font-bold mb-2">Beispiele</h3>
                                <ul class="space-y-3">
                                    ${data.learn.examples.map(ex => `
                                        <li class="flex items-start gap-3">
                                            <span class="material-symbols-outlined text-green-500 mt-0.5">check_circle</span>
                                            <div>
                                                <p class="font-medium text-slate-800">${ex.en}</p>
                                                <p class="text-sm text-slate-500 italic">${ex.de}</p>
                                            </div>
                                        </li>
                                    `).join('')}
                                </ul>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                // PRACTICE MODULE
                contentHTML = `
                    <div class="space-y-4">
                        <div class="bg-blue-50 border-l-4 border-blue-500 p-4 mb-4 rounded-r-lg">
                            <p class="text-blue-700 text-sm">F√ºlle die L√ºcken aus. Achte auf die korrekte Form!</p>
                        </div>
                        ${data.practice.map((item, idx) => `
                            <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-100 relative" id="card-${idx}">
                                <p class="text-lg mb-3 font-medium text-slate-700">${item.q}</p>
                                <div class="flex gap-2">
                                    <input type="text" id="input-${idx}" class="flex-1 bg-slate-50 border border-slate-300 text-slate-900 text-lg rounded-lg focus:ring-primary focus:border-primary block w-full p-2.5 outline-none transition" placeholder="Antwort...">
                                    <button onclick="checkAnswer(${idx}, '${item.a}')" class="bg-primary text-white px-4 rounded-lg font-medium hover:bg-blue-700 transition">
                                        Check
                                    </button>
                                </div>
                                <div id="feedback-${idx}" class="mt-2 hidden"></div>
                                ${item.hint ? `<p class="text-xs text-slate-400 mt-2 cursor-pointer hover:text-slate-600" onclick="this.innerText='üí° ${item.hint}'">Zeige Hinweis</p>` : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            container.innerHTML = modeSwitcher + cheatSheetBtn + contentHTML;
            mainContent.appendChild(container);
        }

        // --- 6. INTERACTION LOGIC ---

        function switchMode(mode) {
            currentMode = mode;
            renderContent();
        }

        function checkAnswer(idx, correct) {
            const input = document.getElementById(`input-${idx}`);
            const feedback = document.getElementById(`feedback-${idx}`);
            const userVal = input.value.trim();

            feedback.classList.remove('hidden');
            
            if (userVal.toLowerCase() === correct.toLowerCase()) {
                input.classList.remove('border-slate-300', 'border-red-500');
                input.classList.add('border-green-500', 'bg-green-50');
                feedback.innerHTML = `<span class="text-green-600 font-bold flex items-center gap-1"><span class="material-symbols-outlined text-sm">check</span> Korrekt!</span>`;
            } else {
                input.classList.remove('border-slate-300', 'border-green-500');
                input.classList.add('border-red-500', 'bg-red-50');
                feedback.innerHTML = `<span class="text-red-600 font-medium flex items-center gap-1"><span class="material-symbols-outlined text-sm">close</span> Falsch. Richtig: <b>${correct}</b></span>`;
            }
        }

        // --- 7. MODAL LOGIC (CHEAT SHEET) ---

        function openTable() {
            const data = appData[currentTenseIndex];
            modalTitle.textContent = `${data.name} - √úbersicht`;
            
            modalBody.innerHTML = `
                <table class="w-full text-left border-collapse">
                    <thead>
                        <tr class="bg-slate-100 text-slate-600 text-sm uppercase tracking-wider">
                            <th class="p-4 border-b">Typ</th>
                            <th class="p-4 border-b">Beispiel</th>
                        </tr>
                    </thead>
                    <tbody class="text-slate-700 divide-y divide-slate-100">
                        <tr>
                            <td class="p-4 font-semibold text-green-600"><span class="material-symbols-outlined align-middle mr-1">add_circle</span> Positiv</td>
                            <td class="p-4">${data.table.positive}</td>
                        </tr>
                        <tr>
                            <td class="p-4 font-semibold text-red-500"><span class="material-symbols-outlined align-middle mr-1">cancel</span> Negativ</td>
                            <td class="p-4">${data.table.negative}</td>
                        </tr>
                        <tr>
                            <td class="p-4 font-semibold text-blue-500"><span class="material-symbols-outlined align-middle mr-1">help</span> Frage</td>
                            <td class="p-4">${data.table.question}</td>
                        </tr>
                    </tbody>
                </table>
                <div class="p-4 bg-yellow-50 text-yellow-800 text-sm">
                    <p><strong>Tipp:</strong> Achte auf Signalw√∂rter wie: <em>${data.learn.signalWords.join(', ')}</em></p>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function closeModal() {
            modal.classList.add('hidden');
        }

        // Close modal on click outside
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });

        // Start the app
        init();

    </script>
</body>
</html>